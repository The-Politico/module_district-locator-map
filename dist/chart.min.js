var DistrictLocator=function(f){"use strict";function d(t){return t}function g(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return r(e,t)})}:r(e,t)}function r(t,e){var r=e.id,n=e.bbox,i=null==e.properties?{}:e.properties,o=function(t,e){var o=function(t){if(null==t)return d;var o,a,s=t.scale[0],c=t.scale[1],u=t.translate[0],l=t.translate[1];return function(t,e){e||(o=a=0);var r=2,n=t.length,i=new Array(n);for(i[0]=(o+=t[0])*s+u,i[1]=(a+=t[1])*c+l;r<n;)i[r]=t[r],++r;return i}}(t.transform),a=t.arcs;function i(t,e){e.length&&e.pop();for(var r=a[t<0?~t:t],n=0,i=r.length;n<i;++n)e.push(o(r[n],n));t<0&&function(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r}(e,i)}function s(t){return o(t)}function c(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function r(t){for(var e=c(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(r)}return function t(e){var r,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(t)};case"Point":r=s(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(s);break;case"LineString":r=c(e.arcs);break;case"MultiLineString":r=e.arcs.map(c);break;case"Polygon":r=u(e.arcs);break;case"MultiPolygon":r=e.arcs.map(u);break;default:return null}return{type:n,coordinates:r}}(e)}(t,e);return null==r&&null==n?{type:"Feature",properties:i,geometry:o}:null==n?{type:"Feature",id:r,properties:i,geometry:o}:{type:"Feature",id:r,bbox:n,properties:i,geometry:o}}f.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},f.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})},f.selection.prototype.appendSelect=function(t,e){var r=e?this.select("".concat(t,".").concat(e.split(" ").join("."))):this.select(t);return 0===r.size()?e?this.append(t).classed(e,!0):this.append(t):r};Math.PI;return function(){return{render:function(){var h={size:50,districtNumber:1,districtFill:"#282828",stateFill:"#ddd",centroidRadius:2,centroidStrokeWidth:1.5,showDot:function(t){return t.area<10||t.extent[0]<5||t.extent[1]<5}};function e(t){t.each(function(t,e,r){var n=r[e],i=h,o=i.size,a=i.districtNumber.toString().padStart(2,"0"),s=g(t,{type:"GeometryCollection",geometries:t.objects.divisions.geometries}),c=f.geoPath().projection(f.geoMercator().fitSize([o,o],s)),u=f.select(n).appendSelect("svg").attr("width",o).attr("height",o),l=u.selectAll("path.background").data(s.features);if(l.enter().append("path").attr("class","background").merge(l).attr("d",c).attr("fill","00"===a?h.districtFill:h.stateFill).attr("stroke","00"===a?h.districtFill:h.stateFill),"00"===a)return u.select("circle.centroid").remove(),void u.select("path.foreground").remove();var d=g(t,t.objects.divisions.geometries.filter(function(t){return t.properties.district===a})[0]),p={area:c.area(d),centroid:c.centroid(d),bounds:c.bounds(d)};p.extent=[p.bounds[1][0]-p.bounds[0][0],p.bounds[1][1]-p.bounds[0][1]],h.showDot(p)?(u.appendSelect("circle","centroid").attr("fill","none").attr("stroke",h.districtFill).attr("stroke-width",h.centroidStrokeWidth).attr("r",h.centroidRadius).attr("cx",p.centroid[0]).attr("cy",p.centroid[1]),u.select("path.foreground").remove()):(u.appendSelect("path","foreground").attr("d",c(d)).attr("fill",h.districtFill).attr("stroke-width",0),u.select("circle.centroid").remove())})}return e.props=function(t){return t?(h=Object.assign(h,t),e):h},e},draw:function(){var t=this.render().props(this._props);f.select(this._selection).datum(this._geoData).call(t)},create:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this._selection=t,this._geoData=e,this._props=r,this.draw()},update:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._props=Object.assign({},this._props,t),this.draw()},resize:function(){this.draw()}}}}(d3);
